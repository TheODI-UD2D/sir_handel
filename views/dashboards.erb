<%= erb(:"includes/signal_form", locals: {target: "/dashboards/#{@dashboard}"}) %>
<div id="dashboard" class="row"></div>

<script>
$(function () {
  callDatePicker();

  d3.json(document.URL, function(error, json) {
    //debugger;
    var signals = []
    json.signals.forEach(function(signal) {
      html = "<div class='col-md-6'><div class='panel panel-default'><div class='panel-heading'><h3 class='panel-title'>"+ signal.name +"</h3></div><iframe src='"+ signal.url +"?layout=simple' height='500px' width='100%' frameborder='0' scrolling='no'></iframe></div></div>"
      signals.push(html)
      console.log(signal.name)
    })
    console.log(signals)
    d3.selectAll("#dashboard").html(signals.join(''))

  });
});

</script>
